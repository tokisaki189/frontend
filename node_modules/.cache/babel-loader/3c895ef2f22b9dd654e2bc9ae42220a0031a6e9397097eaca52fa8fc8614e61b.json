{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from \"vue\";\nimport api from \"../api\";\nimport VueCookies from \"vue-cookie\";\nimport { useStore } from \"vuex\";\nimport router from \"../router\";\nexport default {\n  setup() {\n    let store = useStore();\n    let isLogin = ref(store.state.isLogin);\n    let username = ref(\"\");\n    let password = ref(\"\");\n    let notification = ref(\"\");\n    let token = ref(\"\");\n    function login() {\n      api.post(\"/api/login\", {\n        username: username.value,\n        password: password.value\n      }).then(response => {\n        this.notification = response.data.notification;\n        this.token = response.data.token;\n        this.isLogin = response.data.isLogin;\n        VueCookies.set(\"token\", this.token, {\n          maxAge: 10\n        });\n        if (response.data.isLogin) {\n          router.push(\"/\");\n          setTimeout(() => {\n            router.go(0);\n          }, 500);\n        } else {\n          console.log(\"nothing\");\n        }\n        console.log(isLogin.value);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    return {\n      username,\n      password,\n      login,\n      notification,\n      token,\n      isLogin\n    };\n  }\n};","map":{"version":3,"names":["ref","api","VueCookies","useStore","router","setup","store","isLogin","state","username","password","notification","token","login","post","value","then","response","data","set","maxAge","push","setTimeout","go","console","log","catch","error"],"sources":["/home/prism/Documents/flyticket/src/views/LoginView.vue"],"sourcesContent":["<template>\n  <form class=\"login-form\">\n    <p>Register an account</p>\n    <input\n      type=\"text\"\n      name=\"\"\n      id=\"username\"\n      v-model=\"username\"\n      placeholder=\"Your username\"\n    />\n    <input\n      type=\"password\"\n      name=\"\"\n      id=\"password\"\n      v-model=\"password\"\n      placeholder=\"Your password\"\n      autoComplete=\"true\"\n    />\n    <button class=\"login-button\" @click=\"login\">Login</button>\n  </form>\n  <div>{{ notification }}</div>\n  <router-link to=\"/Register\"\n    >Don't have an account ? Register here\n  </router-link>\n  <button> </button>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport api from \"../api\";\nimport VueCookies from \"vue-cookie\";\nimport { useStore } from \"vuex\";\nimport router from \"../router\";\n\nexport default {\n  setup() {\n    let store = useStore();\n    let isLogin = ref(store.state.isLogin);\n    let username = ref(\"\");\n    let password = ref(\"\");\n    let notification = ref(\"\");\n    let token = ref(\"\");\n    function login() {\n      api\n        .post(\"/api/login\", {\n          username: username.value,\n          password: password.value,\n        })\n        .then((response) => {\n          this.notification = response.data.notification;\n          this.token = response.data.token;\n          this.isLogin = response.data.isLogin;\n          VueCookies.set(\"token\", this.token, { maxAge: 10 });\n          if (response.data.isLogin) {\n            router.push(\"/\");\n            setTimeout(() => {\n              router.go(0);\n            }, 500);\n          } else {\n            console.log(\"nothing\");\n          }\n          console.log(isLogin.value);\n        })\n\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n    return {\n      username,\n      password,\n      login,\n      notification,\n      token,\n      isLogin,\n    };\n  },\n};\n</script>\n<style scoped>\n.login-form {\n  margin: auto;\n  padding: auto;\n  border-radius: 2rem;\n  width: 30%;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  padding: 2rem;\n  background-color: rgb(255, 255, 255);\n}\ntextarea:focus,\ninput:focus {\n  outline: none;\n}\n.login-form input {\n  height: 2rem;\n  border-top: none;\n  border-right: none;\n  border-left: none;\n}\n.login-button {\n  width: 5rem;\n  height: 3rem;\n  border: none;\n  border-radius: 1rem;\n  background-color: aquamarine;\n}\n</style>\n"],"mappings":";AA4BA,SAASA,GAAE,QAAS,KAAK;AACzB,OAAOC,GAAE,MAAO,QAAQ;AACxB,OAAOC,UAAS,MAAO,YAAY;AACnC,SAASC,QAAO,QAAS,MAAM;AAC/B,OAAOC,MAAK,MAAO,WAAW;AAE9B,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,IAAIC,KAAI,GAAIH,QAAQ,EAAE;IACtB,IAAII,OAAM,GAAIP,GAAG,CAACM,KAAK,CAACE,KAAK,CAACD,OAAO,CAAC;IACtC,IAAIE,QAAO,GAAIT,GAAG,CAAC,EAAE,CAAC;IACtB,IAAIU,QAAO,GAAIV,GAAG,CAAC,EAAE,CAAC;IACtB,IAAIW,YAAW,GAAIX,GAAG,CAAC,EAAE,CAAC;IAC1B,IAAIY,KAAI,GAAIZ,GAAG,CAAC,EAAE,CAAC;IACnB,SAASa,KAAKA,CAAA,EAAG;MACfZ,GAAE,CACCa,IAAI,CAAC,YAAY,EAAE;QAClBL,QAAQ,EAAEA,QAAQ,CAACM,KAAK;QACxBL,QAAQ,EAAEA,QAAQ,CAACK;MACrB,CAAC,EACAC,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAI,CAACN,YAAW,GAAIM,QAAQ,CAACC,IAAI,CAACP,YAAY;QAC9C,IAAI,CAACC,KAAI,GAAIK,QAAQ,CAACC,IAAI,CAACN,KAAK;QAChC,IAAI,CAACL,OAAM,GAAIU,QAAQ,CAACC,IAAI,CAACX,OAAO;QACpCL,UAAU,CAACiB,GAAG,CAAC,OAAO,EAAE,IAAI,CAACP,KAAK,EAAE;UAAEQ,MAAM,EAAE;QAAG,CAAC,CAAC;QACnD,IAAIH,QAAQ,CAACC,IAAI,CAACX,OAAO,EAAE;UACzBH,MAAM,CAACiB,IAAI,CAAC,GAAG,CAAC;UAChBC,UAAU,CAAC,MAAM;YACflB,MAAM,CAACmB,EAAE,CAAC,CAAC,CAAC;UACd,CAAC,EAAE,GAAG,CAAC;QACT,OAAO;UACLC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;QACxB;QACAD,OAAO,CAACC,GAAG,CAAClB,OAAO,CAACQ,KAAK,CAAC;MAC5B,CAAC,EAEAW,KAAK,CAAEC,KAAK,IAAK;QAChBH,OAAO,CAACC,GAAG,CAACE,KAAK,CAAC;MACpB,CAAC,CAAC;IACN;IACA,OAAO;MACLlB,QAAQ;MACRC,QAAQ;MACRG,KAAK;MACLF,YAAY;MACZC,KAAK;MACLL;IACF,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}