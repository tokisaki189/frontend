{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  class: \"login-form\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"p\", null, \"Register an account\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [$setup.isLogin ? (_openBlock(), _createElementBlock(\"p\", _hoisted_1, \"log in dc\")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"form\", _hoisted_2, [_hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event),\n    placeholder: \"Your username\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.username]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    name: \"\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.password = $event),\n    placeholder: \"Your password\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.password]]), _createElementVNode(\"button\", {\n    class: \"login-button\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $setup.login && $setup.login(...args))\n  }, \"Login\")]), _createElementVNode(\"p\", null, _toDisplayString($setup.notification), 1 /* TEXT */), _createElementVNode(\"form\", null, [_createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => _ctx.change && _ctx.change(...args)),\n    class: \"login-button\"\n  }, \"check log\")]), _createVNode(_component_router_link, {\n    to: \"/Register\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Don't have an account ? Register here \")]),\n    _: 1 /* STABLE */\n  })], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","$setup","isLogin","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","type","name","id","username","$event","placeholder","password","onClick","_cache","args","login","_toDisplayString","notification","_ctx","change","_createVNode","_component_router_link","to"],"sources":["/home/prism/Documents/flyticket/src/views/LoginView.vue"],"sourcesContent":["<template>\n  <p v-if=\"isLogin\">log in dc</p>\n  <form class=\"login-form\">\n    <p>Register an account</p>\n    <input\n      type=\"text\"\n      name=\"\"\n      id=\"username\"\n      v-model=\"username\"\n      placeholder=\"Your username\"\n    />\n    <input\n      type=\"password\"\n      name=\"\"\n      id=\"password\"\n      v-model=\"password\"\n      placeholder=\"Your password\"\n    />\n    <button class=\"login-button\" @click=\"login\">Login</button>\n  </form>\n  <p>{{ notification }}</p>\n  <form>\n    <button @click=\"change\" class=\"login-button\">check log</button>\n  </form>\n  <router-link to=\"/Register\"\n    >Don't have an account ? Register here\n  </router-link>\n</template>\n\n<script>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport VueCookies from \"vue-cookie\";\nimport { useStore } from \"vuex\";\n// import Vuex from \"vuex\";\nexport default {\n  setup() {\n    let store = useStore();\n    let isLogin = ref(store.state.isLogin);\n    let username = ref(\"\");\n    let password = ref(\"\");\n    let notification = ref(\"\");\n    let token = ref(\"\");\n    console.log(store.state.isLogin);\n    function login() {\n      axios\n        .post(\"http://localhost:3000/api/login\", {\n          username: username.value,\n          password: password.value,\n        })\n        .then((response) => {\n          console.log(response.data);\n          this.notification = response.data.notification;\n          this.token = response.data.token;\n          // console.log(\" check\" + response.data.isLogin);\n          this.isLogin = response.data.isLogin;\n          VueCookies.set(\"token\", this.token);\n          if (response.data.isLogin === true) {\n            setTimeout(() => {\n              console.log(\"log dc\");\n            }, 1000);\n          } else {\n            console.log(\"khong log dc\");\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n    onMounted(() => {\n      // console.log(this.token.value);\n      axios\n        .get(\"http://localhost:3000/check\", { withCredentials: true })\n        .then((response) => {\n          console.log(response.data);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    });\n    // function change() {\n    //   console.log(this.token);\n    //   axios\n    //     .get(\"http://localhost:3000/check\", { withCredentials: true })\n    //     .then((response) => {\n    //       console.log(response.data);\n    //     })\n    //     .catch((error) => {\n    //       console.log(error);\n    //     });\n    // }\n    return {\n      username,\n      password,\n      login,\n      notification,\n      // change,\n      token,\n      isLogin,\n    };\n  },\n};\n</script>\n<style>\n.login-form {\n  margin: auto;\n  padding: auto;\n  border-radius: 2rem;\n  width: 30%;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  padding: 2rem;\n  background-color: rgb(255, 255, 255);\n}\ntextarea:focus,\ninput:focus {\n  outline: none;\n}\n.login-form input {\n  height: 2rem;\n  border-top: none;\n  border-right: none;\n  border-left: none;\n}\n.login-button {\n  width: 5rem;\n  height: 3rem;\n  border: none;\n  border-radius: 1rem;\n  background-color: aquamarine;\n}\n</style>\n"],"mappings":";;;;;EAEQA,KAAK,EAAC;AAAY;gCACtBC,mBAAA,CAA0B,WAAvB,qBAAmB;;;;6DAFfC,MAAA,CAAAC,OAAO,I,cAAhBC,mBAAA,CAA+B,KAAAC,UAAA,EAAb,WAAS,K,mCAC3BJ,mBAAA,CAiBO,QAjBPK,UAiBO,GAhBLC,UAA0B,E,gBAC1BN,mBAAA,CAME;IALAO,IAAI,EAAC,MAAM;IACXC,IAAI,EAAC,EAAE;IACPC,EAAE,EAAC,UAAU;+DACJR,MAAA,CAAAS,QAAQ,GAAAC,MAAA;IACjBC,WAAW,EAAC;iDADHX,MAAA,CAAAS,QAAQ,E,mBAGnBV,mBAAA,CAME;IALAO,IAAI,EAAC,UAAU;IACfC,IAAI,EAAC,EAAE;IACPC,EAAE,EAAC,UAAU;+DACJR,MAAA,CAAAY,QAAQ,GAAAF,MAAA;IACjBC,WAAW,EAAC;iDADHX,MAAA,CAAAY,QAAQ,E,GAGnBb,mBAAA,CAA0D;IAAlDD,KAAK,EAAC,cAAc;IAAEe,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEf,MAAA,CAAAgB,KAAA,IAAAhB,MAAA,CAAAgB,KAAA,IAAAD,IAAA,CAAK;KAAE,OAAK,E,GAEnDhB,mBAAA,CAAyB,WAAAkB,gBAAA,CAAnBjB,MAAA,CAAAkB,YAAY,kBAClBnB,mBAAA,CAEO,eADLA,mBAAA,CAA+D;IAAtDc,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEI,IAAA,CAAAC,MAAA,IAAAD,IAAA,CAAAC,MAAA,IAAAL,IAAA,CAAM;IAAEjB,KAAK,EAAC;KAAe,WAAS,E,GAExDuB,YAAA,CAEcC,sBAAA;IAFDC,EAAE,EAAC;EAAW;sBACxB,MACH,C,iBADG,wCACH,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}