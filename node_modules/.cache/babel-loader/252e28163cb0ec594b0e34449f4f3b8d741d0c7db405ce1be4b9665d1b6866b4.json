{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createElementBlock as _createElementBlock, KeepAlive as _KeepAlive, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"top-bar\"\n};\nconst _hoisted_2 = {\n  class: \"nav-bar\"\n};\nconst _hoisted_3 = {\n  class: \"user-section\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_confirm_box = _resolveComponent(\"confirm-box\");\n  const _component_footer_section = _resolveComponent(\"footer-section\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"nav\", _hoisted_2, [_createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Home \"), _createVNode(_component_font_awesome_icon, {\n      icon: \"home\"\n    })]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_router_link, {\n    to: \"/about\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"About\")]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" <router-link to=\\\"/booking\\\">\\n        Find Flight\\n        <font-awesome-icon icon=\\\"search\\\" />\\n      </router-link> \")]), _createElementVNode(\"nav\", _hoisted_3, [$setup.isLogin ? (_openBlock(), _createBlock(_component_router_link, {\n    key: 0,\n    to: \"/history\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_font_awesome_icon, {\n      icon: \"shopping-cart\"\n    })]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), !$setup.isLogin ? (_openBlock(), _createBlock(_component_router_link, {\n    key: 1,\n    to: \"/Login\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Login\")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), !$setup.isLogin ? (_openBlock(), _createBlock(_component_router_link, {\n    key: 2,\n    to: \"/Register\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Register \")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), $setup.isLogin ? (_openBlock(), _createBlock(_component_router_link, {\n    key: 3,\n    to: \"/user\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" Profile \"), _createVNode(_component_font_awesome_icon, {\n      icon: \"user\"\n    })]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), $setup.isLogin && $setup.isAdmin ? (_openBlock(), _createBlock(_component_router_link, {\n    key: 4,\n    to: \"/admin\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Admin Panel\")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), $setup.isLogin ? (_openBlock(), _createElementBlock(\"a\", {\n    key: 5,\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.logout && $setup.logout(...args))\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fa', 'right-from-bracket']\n  })])) : _createCommentVNode(\"v-if\", true)])]), (_openBlock(), _createBlock(_KeepAlive, null, [_createVNode(_component_router_view)], 1024 /* DYNAMIC_SLOTS */)), _createCommentVNode(\" <button type=\\\"submit\\\" @click=\\\"changestate\\\">change</button> \"), $setup.showConfirm ? (_openBlock(), _createBlock(_component_confirm_box, {\n    key: 0\n  })) : _createCommentVNode(\"v-if\", true), _createVNode(_component_footer_section)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_router_link","to","_component_font_awesome_icon","icon","_createCommentVNode","_hoisted_3","$setup","isLogin","_createBlock","isAdmin","_createElementBlock","onClick","_cache","args","logout","_KeepAlive","_component_router_view","showConfirm","_component_confirm_box","key","_component_footer_section"],"sources":["/home/prism/Documents/flyticket/src/App.vue"],"sourcesContent":["/* eslint-disable */\n<template>\n  <div class=\"top-bar\">\n    <nav class=\"nav-bar\">\n      <router-link to=\"/\">Home <font-awesome-icon icon=\"home\" /></router-link>\n      <router-link to=\"/about\">About</router-link>\n      <!-- <router-link to=\"/booking\">\n        Find Flight\n        <font-awesome-icon icon=\"search\" />\n      </router-link> -->\n    </nav>\n    <nav class=\"user-section\">\n      <router-link to=\"/history\" v-if=\"isLogin\"\n        ><font-awesome-icon icon=\"shopping-cart\" />\n      </router-link>\n      <router-link to=\"/Login\" v-if=\"!isLogin\">Login</router-link>\n      <router-link to=\"/Register\" v-if=\"!isLogin\">Register </router-link>\n      <router-link to=\"/user\" v-if=\"isLogin\">\n        Profile\n        <font-awesome-icon icon=\"user\" />\n      </router-link>\n      <router-link to=\"/admin\" v-if=\"isLogin && isAdmin\"\n        >Admin Panel</router-link\n      >\n      <a @click=\"logout\" v-if=\"isLogin\">\n        <font-awesome-icon :icon=\"['fa', 'right-from-bracket']\" />\n      </a>\n    </nav>\n  </div>\n  <keep-alive>\n    <router-view />\n  </keep-alive>\n  <!-- <button type=\"submit\" @click=\"changestate\">change</button> -->\n  <confirm-box v-if=\"showConfirm\"></confirm-box>\n  <footer-section></footer-section>\n</template>\n<script>\nimport { ref, onMounted } from \"vue\";\nimport { useStore } from \"vuex\";\nimport VueCookies from \"vue-cookie\";\nimport router from \"./router\";\n\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport {\n  faRightFromBracket,\n  faSearch,\n  faRightToBracket,\n  faUser,\n  faHome,\n  faShoppingCart,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport ConfirmBox from \"./components/ConfirmBox.vue\";\nimport FooterSection from \"./components/FooterSection.vue\";\nimport jwtDecode from \"jwt-decode\";\nimport api from \"./api.js\";\nimport Cookies from \"js-cookie\";\n\nexport default {\n  components: { FontAwesomeIcon, ConfirmBox, FooterSection },\n  setup() {\n    let store = useStore();\n    let isLogin = ref();\n    let showConfirm = ref(false);\n    let user = ref(\"\");\n    let userId = ref();\n    let userInfo = ref(\"\");\n    let isAdmin = ref();\n    library.add(\n      faRightFromBracket,\n      faShoppingCart,\n      faSearch,\n      faRightToBracket,\n      faUser,\n      faHome\n    );\n    onMounted(() => {\n      // console.log(this.token.value);\n      api\n        .get(\"/check\", { withCredentials: true })\n        .then((response) => {\n          if (response.data.isLogin === true) {\n            store.commit(\"login\");\n            isLogin.value = store.state.isLogin;\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    });\n    const token = Cookies.get(\"token\");\n    if (token) {\n      user.value = jwtDecode(token);\n      userId.value = user.value.id;\n      api\n        .get(\"/userprofile/\" + userId.value, {})\n        .then((response) => {\n          userInfo.value = response.data;\n          store.commit(\"setID\", userInfo.value[0].id);\n          store.commit(\"setAdmin\", userInfo.value[0].isAdmin);\n          isAdmin.value = store.state.isAdmin;\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n    function logout() {\n      let text = \"Are you sure\";\n      if (confirm(text) == true) {\n        VueCookies.set(\"token\", null, { expires: -1, path: \"/\" });\n        router.push(\"/\");\n        setTimeout(() => {\n          router.go(0);\n        }, 500);\n      } else {\n        console.log(\"cancelled\");\n      }\n    }\n    return {\n      isLogin,\n      confirm,\n      showConfirm,\n      user,\n      userId,\n      userInfo,\n      isAdmin,\n      logout,\n    };\n  },\n};\n</script>\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\nbody {\n  background-color: #d9eafc;\n}\n* {\n  margin: 0;\n  padding: 0;\n}\n.top-bar {\n  position: fixed;\n  top: 0;\n  padding-left: 2rem;\n  width: 100%;\n  height: 3.5rem;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  /* background-image: linear-gradient(to top, rgba(255, 0, 0, 0), rgb(0, 0, 0)); */\n  background-color: #2c3e50;\n  align-items: center;\n}\n.user-section {\n  font-size: x-large;\n  display: flex;\n  /* gap: 0.5rem; */\n  margin-right: 4rem;\n  height: 100%;\n}\n.user-section a {\n  font-size: x-large;\n  font-weight: bold;\n  color: #fafcff;\n  text-decoration: none;\n  /* border-radius: 0.5rem; */\n  /* padding: 0.2rem; */\n}\n.user-section *:hover {\n  /* color: rgb(255, 0, 0); */\n  background-color: #1cb0f6;\n}\n.nav-bar {\n  display: flex;\n  /* gap: 0.5em; */\n  font-size: x-large;\n  height: 100%;\n}\n.nav-bar *:hover {\n  /* color: rgb(208, 255, 0); */\n  background-color: #1cb0f6;\n}\nnav a {\n  font-size: x-large;\n  font-weight: bold;\n  color: #ffffff;\n  /* background-color: red; */\n  text-decoration: none;\n  padding: 0.2rem;\n  /* height: 100%; */\n}\n\nnav a.router-link-exact-active {\n  /* color: #5e5e5e; */\n  background-color: #1cb0f6;\n  /* height: 100%; */\n}\n</style>\n"],"mappings":";;EAEOA,KAAK,EAAC;AAAS;;EACbA,KAAK,EAAC;AAAS;;EAQfA,KAAK,EAAC;AAAc;;;;;;;6DAT3BC,mBAAA,CA0BM,OA1BNC,UA0BM,GAzBJD,mBAAA,CAOM,OAPNE,UAOM,GANJC,YAAA,CAAwEC,sBAAA;IAA3DC,EAAE,EAAC;EAAG;sBAAC,MAAK,C,iBAAL,OAAK,GAAAF,YAAA,CAAiCG,4BAAA;MAAdC,IAAI,EAAC;IAAM,G;;MACvDJ,YAAA,CAA4CC,sBAAA;IAA/BC,EAAE,EAAC;EAAQ;sBAAC,MAAK,C,iBAAL,OAAK,E;;MAC9BG,mBAAA,6HAGkB,C,GAEpBR,mBAAA,CAgBM,OAhBNS,UAgBM,GAf6BC,MAAA,CAAAC,OAAO,I,cAAxCC,YAAA,CAEcR,sBAAA;;IAFDC,EAAE,EAAC;;sBACb,MAA0C,CAA1CF,YAAA,CAA0CG,4BAAA;MAAvBC,IAAI,EAAC;IAAe,G;;4CAEVG,MAAA,CAAAC,OAAO,I,cAAvCC,YAAA,CAA4DR,sBAAA;;IAA/CC,EAAE,EAAC;;sBAAyB,MAAK,C,iBAAL,OAAK,E;;4CACXK,MAAA,CAAAC,OAAO,I,cAA1CC,YAAA,CAAmER,sBAAA;;IAAtDC,EAAE,EAAC;;sBAA4B,MAAS,C,iBAAT,WAAS,E;;2CACvBK,MAAA,CAAAC,OAAO,I,cAArCC,YAAA,CAGcR,sBAAA;;IAHDC,EAAE,EAAC;;sBAAuB,MAErC,C,iBAFqC,WAErC,GAAAF,YAAA,CAAiCG,4BAAA;MAAdC,IAAI,EAAC;IAAM,G;;2CAEDG,MAAA,CAAAC,OAAO,IAAID,MAAA,CAAAG,OAAO,I,cAAjDD,YAAA,CAECR,sBAAA;;IAFYC,EAAE,EAAC;;sBACb,MAAW,C,iBAAX,aAAW,E;;2CAEWK,MAAA,CAAAC,OAAO,I,cAAhCG,mBAAA,CAEI;;IAFAC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEP,MAAA,CAAAQ,MAAA,IAAAR,MAAA,CAAAQ,MAAA,IAAAD,IAAA,CAAM;MACfd,YAAA,CAA0DG,4BAAA;IAAtCC,IAAI,EAAE;EAA4B,G,2DAI5DK,YAAA,CAEaO,UAAA,SADXhB,YAAA,CAAeiB,sBAAA,E,8BAEjBZ,mBAAA,oEAAmE,EAChDE,MAAA,CAAAW,WAAW,I,cAA9BT,YAAA,CAA8CU,sBAAA;IAAAC,GAAA;EAAA,M,mCAC9CpB,YAAA,CAAiCqB,yBAAA,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}