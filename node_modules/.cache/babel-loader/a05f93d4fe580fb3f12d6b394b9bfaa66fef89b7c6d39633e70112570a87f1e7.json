{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from \"vue\";\nimport api from \"../api\";\nimport VueCookies from \"vue-cookie\";\nimport { useStore } from \"vuex\";\nimport router from \"../router\";\nexport default {\n  setup() {\n    let store = useStore();\n    let isLogin = ref(store.state.isLogin);\n    let username = ref(\"\");\n    let password = ref(\"\");\n    let notification = ref(\"\");\n    let token = ref(\"\");\n    function checkcookie() {\n      console.log(VueCookies.get(\"token\"));\n    }\n    function login() {\n      api.post(\"/api/login\", {\n        username: username.value,\n        password: password.value\n      }).then(response => {\n        this.notification = response.data.notification;\n        this.token = response.data.token;\n        this.isLogin = response.data.isLogin;\n        // const expirationTime = 10; // in milliseconds\n        // const now = new Date();\n\n        // // Check if the cookie already exists and get the timestamp\n        // const existingTimestamp = VueCookies.get(\"my-cookie-timestamp\");\n        // const currentTimestamp = now.getTime();\n\n        // if (existingTimestamp != null) {\n        //   // Calculate the elapsed time since the cookie was last set\n        //   const elapsedTime = currentTimestamp - existingTimestamp;\n\n        //   if (elapsedTime >= expirationTime) {\n        //     // The cookie has expired, remove it\n        //     VueCookies.remove(\"token\");\n        //     VueCookies.remove(\"my-cookie-timestamp\");\n        //   }\n        // }\n        VueCookies.set(\"token\", this.token);\n        if (response.data.isLogin) {\n          router.push(\"/\");\n          setTimeout(() => {\n            router.go(0);\n          }, 1000);\n        } else {\n          console.log(\"nothing\");\n        }\n        console.log(isLogin.value);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n    return {\n      username,\n      password,\n      login,\n      notification,\n      token,\n      isLogin,\n      checkcookie\n    };\n  }\n};","map":{"version":3,"names":["ref","api","VueCookies","useStore","router","setup","store","isLogin","state","username","password","notification","token","checkcookie","console","log","get","login","post","value","then","response","data","set","push","setTimeout","go","catch","error"],"sources":["/home/prism/Documents/App/deploy/frontend/src/views/LoginView.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <form class=\"login-form\" @submit.prevent=\"\">\n      <p>Login</p>\n      <input\n        type=\"text\"\n        name=\"\"\n        id=\"username\"\n        v-model=\"username\"\n        placeholder=\"Your username\"\n      />\n      <input\n        type=\"password\"\n        name=\"\"\n        id=\"password\"\n        v-model=\"password\"\n        placeholder=\"Your password\"\n        autoComplete=\"true\"\n      />\n      <button class=\"login-button\" @click.prevent=\"login\">Login</button>\n    </form>\n    <div>{{ notification }}</div>\n    <div class=\"link-wrap\">\n      <router-link to=\"/Register\"\n        >Don't have an account ? Register here\n      </router-link>\n      <router-link to=\"/forget\"> Forgot password </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport api from \"../api\";\nimport VueCookies from \"vue-cookie\";\nimport { useStore } from \"vuex\";\nimport router from \"../router\";\n\nexport default {\n  setup() {\n    let store = useStore();\n    let isLogin = ref(store.state.isLogin);\n    let username = ref(\"\");\n    let password = ref(\"\");\n    let notification = ref(\"\");\n    let token = ref(\"\");\n    function checkcookie() {\n      console.log(VueCookies.get(\"token\"));\n    }\n    function login() {\n      api\n        .post(\"/api/login\", {\n          username: username.value,\n          password: password.value,\n        })\n        .then((response) => {\n          this.notification = response.data.notification;\n          this.token = response.data.token;\n          this.isLogin = response.data.isLogin;\n          // const expirationTime = 10; // in milliseconds\n          // const now = new Date();\n\n          // // Check if the cookie already exists and get the timestamp\n          // const existingTimestamp = VueCookies.get(\"my-cookie-timestamp\");\n          // const currentTimestamp = now.getTime();\n\n          // if (existingTimestamp != null) {\n          //   // Calculate the elapsed time since the cookie was last set\n          //   const elapsedTime = currentTimestamp - existingTimestamp;\n\n          //   if (elapsedTime >= expirationTime) {\n          //     // The cookie has expired, remove it\n          //     VueCookies.remove(\"token\");\n          //     VueCookies.remove(\"my-cookie-timestamp\");\n          //   }\n          // }\n          VueCookies.set(\"token\", this.token);\n          if (response.data.isLogin) {\n            router.push(\"/\");\n            setTimeout(() => {\n              router.go(0);\n            }, 1000);\n          } else {\n            console.log(\"nothing\");\n          }\n          console.log(isLogin.value);\n        })\n\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n    return {\n      username,\n      password,\n      login,\n      notification,\n      token,\n      isLogin,\n      checkcookie,\n    };\n  },\n};\n</script>\n<style scoped>\nbody {\n}\n.container {\n  width: 30rem;\n  background-color: white;\n  border: 1px black solid;\n  margin: auto;\n  padding: auto;\n  margin-top: 5rem;\n  border-radius: 1rem;\n  padding-bottom: 3rem;\n}\n.login-form {\n  margin: auto;\n  padding: auto;\n  border-radius: 2rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  padding: 2rem;\n  background-color: rgb(255, 255, 255);\n}\ntextarea:focus,\ninput:focus {\n  outline: none;\n}\n.login-form input {\n  height: 2rem;\n  border-top: none;\n  border-right: none;\n  border-left: none;\n}\nbutton {\n  appearance: button;\n  background-color: #1899d6;\n  border: solid transparent;\n  border-radius: 16px;\n  border-width: 0 0 4px;\n  box-sizing: border-box;\n  color: #ffffff;\n  cursor: pointer;\n  display: inline-block;\n  font-family: din-round, sans-serif;\n  font-size: 15px;\n  font-weight: 700;\n  letter-spacing: 0.8px;\n  line-height: 20px;\n  margin: 0;\n  outline: none;\n  overflow: visible;\n  padding: 13px 16px;\n  text-align: center;\n  text-transform: uppercase;\n  touch-action: manipulation;\n  transform: translateZ(0);\n  transition: filter 0.2s;\n  user-select: none;\n  -webkit-user-select: none;\n  vertical-align: middle;\n  white-space: nowrap;\n  width: 5rem;\n}\n\nbutton:after {\n  background-clip: padding-box;\n  background-color: #1cb0f6;\n  border: solid transparent;\n  border-radius: 16px;\n  border-width: 0 0 4px;\n  bottom: -4px;\n  content: \"\";\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: -1;\n}\n\nbutton:main,\n.button-19:focus {\n  user-select: auto;\n}\n\nbutton:hover:not(:disabled) {\n  filter: brightness(1.1);\n  -webkit-filter: brightness(1.1);\n}\n\nbutton:disabled {\n  cursor: auto;\n}\n.link-wrap {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n</style>\n"],"mappings":";AAgCA,SAASA,GAAE,QAAS,KAAK;AACzB,OAAOC,GAAE,MAAO,QAAQ;AACxB,OAAOC,UAAS,MAAO,YAAY;AACnC,SAASC,QAAO,QAAS,MAAM;AAC/B,OAAOC,MAAK,MAAO,WAAW;AAE9B,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,IAAIC,KAAI,GAAIH,QAAQ,EAAE;IACtB,IAAII,OAAM,GAAIP,GAAG,CAACM,KAAK,CAACE,KAAK,CAACD,OAAO,CAAC;IACtC,IAAIE,QAAO,GAAIT,GAAG,CAAC,EAAE,CAAC;IACtB,IAAIU,QAAO,GAAIV,GAAG,CAAC,EAAE,CAAC;IACtB,IAAIW,YAAW,GAAIX,GAAG,CAAC,EAAE,CAAC;IAC1B,IAAIY,KAAI,GAAIZ,GAAG,CAAC,EAAE,CAAC;IACnB,SAASa,WAAWA,CAAA,EAAG;MACrBC,OAAO,CAACC,GAAG,CAACb,UAAU,CAACc,GAAG,CAAC,OAAO,CAAC,CAAC;IACtC;IACA,SAASC,KAAKA,CAAA,EAAG;MACfhB,GAAE,CACCiB,IAAI,CAAC,YAAY,EAAE;QAClBT,QAAQ,EAAEA,QAAQ,CAACU,KAAK;QACxBT,QAAQ,EAAEA,QAAQ,CAACS;MACrB,CAAC,EACAC,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAI,CAACV,YAAW,GAAIU,QAAQ,CAACC,IAAI,CAACX,YAAY;QAC9C,IAAI,CAACC,KAAI,GAAIS,QAAQ,CAACC,IAAI,CAACV,KAAK;QAChC,IAAI,CAACL,OAAM,GAAIc,QAAQ,CAACC,IAAI,CAACf,OAAO;QACpC;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACAL,UAAU,CAACqB,GAAG,CAAC,OAAO,EAAE,IAAI,CAACX,KAAK,CAAC;QACnC,IAAIS,QAAQ,CAACC,IAAI,CAACf,OAAO,EAAE;UACzBH,MAAM,CAACoB,IAAI,CAAC,GAAG,CAAC;UAChBC,UAAU,CAAC,MAAM;YACfrB,MAAM,CAACsB,EAAE,CAAC,CAAC,CAAC;UACd,CAAC,EAAE,IAAI,CAAC;QACV,OAAO;UACLZ,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;QACxB;QACAD,OAAO,CAACC,GAAG,CAACR,OAAO,CAACY,KAAK,CAAC;MAC5B,CAAC,EAEAQ,KAAK,CAAEC,KAAK,IAAK;QAChBd,OAAO,CAACC,GAAG,CAACa,KAAK,CAAC;MACpB,CAAC,CAAC;IACN;IACA,OAAO;MACLnB,QAAQ;MACRC,QAAQ;MACRO,KAAK;MACLN,YAAY;MACZC,KAAK;MACLL,OAAO;MACPM;IACF,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}